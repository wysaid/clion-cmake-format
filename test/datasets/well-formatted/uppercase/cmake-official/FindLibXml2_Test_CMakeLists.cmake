CMAKE_MINIMUM_REQUIRED(VERSION 3.10)
PROJECT(TestFindLibXml2 C)
INCLUDE(CTest)

FIND_PACKAGE(LibXml2 REQUIRED)

ADD_DEFINITIONS(-DCMAKE_EXPECTED_LibXml2_VERSION="${LibXml2_VERSION}")

ADD_EXECUTABLE(test_tgt main.c)
TARGET_LINK_LIBRARIES(test_tgt LibXml2::LibXml2)
ADD_TEST(NAME test_tgt COMMAND test_tgt)

ADD_EXECUTABLE(test_var main.c)
TARGET_INCLUDE_DIRECTORIES(test_var PRIVATE ${LIBXML2_INCLUDE_DIRS})
TARGET_LINK_LIBRARIES(test_var PRIVATE ${LIBXML2_LIBRARIES})
ADD_TEST(NAME test_var COMMAND test_var)

ADD_TEST(NAME xmllint_tgt COMMAND LibXml2::xmllint --version)

ADD_TEST(NAME xmllint_var COMMAND ${LIBXML2_XMLLINT_EXECUTABLE} --version)
